# this is the target proxmox cluster name + "." + the pve_cloud_domain you chose in cloud-inv.yaml
# it determines where the playbooks will create and find the lxcs
target_pve: pve-cluster-name.pve-cloud-domain.example # change this to your cluster / domain
stack_name: dhcp # stack_name + "." + the pve_cloud_domain be used for identifing vms, via the proxmox api and vm tags (also known as stack_fqdn)

# lxcs defined here will be automatically created / deleted if missing by the pve.cloud.sync_lxcs playbook
# the collection is using a hashing mechanism on these creation parameters to determine what lxcs/vms exist / are missing.
# after the creation you can see this hash in the tags of the lxc/vm ending with -blake
lxcs:
- hostname: main # hostname is optional but needs to be set if we define vars: on lxc level (because hashing is also used for var association)
  parameters:
    # these rootfs parameters are the same as if you would use the proxmox ui or the pct utility. volume= defines the proxmox storage the lxcs
    # disk should be created under. Naming / creating your storage as ssd is just a suggestion. Although it is recommended that if you use ceph,
    # you create one storage class per device class.
    rootfs: "volume=ssd:15,mountoptions=discard"
    cores: 1
    memory: 256
    # here you should set your bridge name, optionally the vlan tag, static ips and gateway
    # the ips have to match what you set in cloud-inv.yaml
    net0: "name=pve,bridge=vmbr0,tag=100,firewall=1,ip=192.168.1.2/24,gw=192.168.1.1"
  vars:
    # this variable determines the lxc that will be the main dhcp, only one lxc should have this set to true
    kea_dhcp_main: true

- hostname: failover
  parameters:
    rootfs: "volume=ssd:15,mountoptions=discard"
    cores: 1
    memory: 256
    net0: "name=pve,bridge=vmbr0,tag=100,firewall=1,ip=192.168.1.3/24,gw=192.168.1.1"
  vars:
    # false means failover, needs to again only be one lxc that has this set, if you create more lxcs you will break
    # the setup playbook
    kea_dhcp_main: false

# these parameters get passed to all defined lxcs:, they will be merged with the individual parameters:
lxc_base_parameters:
  onboot: 1 # enable autostart (when rebooting or staring the proxmox host)

# this is where you should paste your own public key that your local machine has loaded
# it will be used during the setup and afterwards to connect via ansible
# at the moment we only support one key.
root_ssh_pub_key: 'ssh-ed25519 AAAeAC3NzaC1tlZDI1NdasdAAIGreJ6EeeGddasB30hv1h5+erHhreUHzvmYE' 

# ansible default plugin variable. this loads the custom lxc inventory from the pve_cloud collection plugins directory
plugin: pve.cloud.lxc_inv
