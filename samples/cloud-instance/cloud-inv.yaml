# the choice of this domain is very important
# this will group your cloud services together and will be 
# used for ddns, choose this carefully. This is the same domain
# you have to set initially during `pvcli connect-cluster ...`
pve_cloud_domain: pve-cloud-domain.example 

# here you may define multiple proxmox clusters that will be part of your first proxmox cloud instance
# one proxmox cluster will suffice
pve_clusters:
  pve-cluster-name: # exactly the name you set in the proxmox ui during create cluster
    # these core services may be deployed only once as they serve the entire cloud
    # and all proxmox clusters in it
    pve_unique_cloud_services:
      # these 3 core services can remain as they are in the example
      # you need these three spread accross your cloud
      - dns
      - dhcp
      - psql-state
    # set ips of your own subnet here
    # these ips will be managed by keepalive
    # the external floating ip is meant to be used for firewall forwards to expose certain
    # service to the clearweb
    pve_haproxy_floating_ip_external: "192.168.1.6"
    # the internal floating ip can be used for internal dns and has automatic
    # broader access to kubernetes ingresses and tcp proxies
    pve_haproxy_floating_ip_internal: "192.168.1.7"
    # optional host specific vars, key is the proxmox host and value can be any object of values you want to pass
    # this is useful if you want to make your own proxmox host setup playbooks around this inventory file
    pve_host_vars: {} 

# subnet the dhcp will use for allocation of services and kubernetes nodes
# the static allocated service ips have to be in the same subnet, later in the pool definitions
# we specify the range for dynamic allocations. Ideally pick a pool at the end or beginning of your subnet where
# you allocate all the static service ips under.
# a /24 can quickly fill up if you are running a mid sized operation
# a /23 /22 net is recommended
pve_vm_subnet: "192.168.1.0/24" # set your own


# have to match the ips in dhcp-inv.yaml
kea_dhcp_main_ip: "192.168.1.2" # set your own ips
kea_dhcp_failover_ip: "192.168.1.3"
kea_dhcp_routers: "192.168.1.1" # dhcp routers option passed to all clients, again set your own ips here
kea_dhcp_static_routes: "0.0.0.0/0 - 192.168.1.1" # static routes alternative (dhcp quirk)
# these are the pools dynamic addreses will be assigned. they should not overlap with static defined service ips!
# proxmox cloud will use this pool when creating kubernetes clusters and any dynamic vms / lxcs
kea_dhcp_pools:
  - "192.168.1.40 - 192.168.1.254"

# have to match the ips in bind-inv.yaml
bind_master_ip: "192.168.1.4" # choose your own
bind_slave_ip: "192.168.1.5"

# service ips should be within the arpa zone for the services
bind_arpa_zone_service_lxcs: "1.168.192.in-addr.arpa"
bind_additional_arpa_zones: [] # incase your cloud net is bigger than /24 (ddns also includes reverse dns)

bind_zone_admin_email: operations.example.com.

# you can omit these acme flags if you dont want to use the tls service provided by the collection
# the collection will register an acme account for you
acme_contact: acme@example.com # change to your own email!
# currently we only support route53/ionos for integrated tls, leave this out if you want to implement it yourself
# or request a feature! 
acme_method: route53 

plugin: pve.cloud.pve_cloud_inv