version: 3

dependencies:
  exclude:
    system:
      - openshift-clients # gets triggered by includes, conflicts with license server
  ansible_core:
    package_pip: ansible-core==2.16.14 # same as in meta/runtime.yml
  ansible_runner:
    package_pip: ansible-runner==2.4.1
  galaxy:
    collections:
      - name: pxc.cloud
        version: 3.14.9 # sed ci - DONT REMOVE COMMENT
      
images:
  base_image:
    name: docker.io/redhat/ubi10:latest # needs rhel image

additional_build_steps:
  append_base:
    # need git to install collection deps
    - RUN dnf install git -y
    # missing distlib dependency in kubespray
    - RUN /usr/bin/python3 -m pip install distlib==0.4.0